<!--主页/后台用户管理/渠道管理/[新增/编辑]内部渠道-->
<div class="modal-header">
    {{option}}{{form.guest_channel|channel}}
</div>
<div class="modal-body">
    <!--表单-->
    <form class="form-horizontal">
        <!--选择员工-->
        <div class="form-group">
            <label class="col-lg-2 control-label">选择员工：</label>
            <div class="col-lg-10">
                <select ng-model="form.staff_if" ng-options="staff for staff in staffs">
                    <option value="staff.staff_id">{{staff.name}}</option>
                </select>
            </div>
        </div>
        <!--职位设置-->
        <div class="form-group">
            <label class="col-lg-2 control-label">职位：</label>
            <div class="col-lg-10">
                <input type="text" ng-model="form.position"/>
            </div>
        </div>
        <!--电话隐私-->
        <div class="form-group">
            <label class="col-lg-2 control-label">电话隐私：</label>
            <div class="col-lg-10">
                <label class="control-label">
                    <input type="checkbox" ng-model="form.phone_private"/>查看预订订单时，客户电话部分号码以"*"代替
                </label>
            </div>
        </div>
        <!--职能权限-->
        <div class="form-group hidden">
            <label class="col-lg-2 control-label">职能权限：</label>
            <div class="col-lg-10">
                <!--职能权限表-->
                <table class="table table-hover table-bordered table-responsive">
                    <thead>
                    <tr>
                        <td>管理职能</td>
                        <td>营销职能</td>
                        <td>预定职能</td>
                        <td>销售职能</td>
                    </tr>
                    </thead>
                    <tbody class="table-info">
                    <tr>
                        <td>管理职能</td>
                        <td>营销职能</td>
                        <td>预定职能</td>
                        <td>销售职能</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <!--管理渠道客户【高层管理】-->
        <div ng-if="form.guest_channel===1" class="form-group">
            <label class="col-lg-2 control-label">管理渠道客户：</label>
            <div class="col-lg-10">
                <input type="text" ng-model="form.channel"/>
            </div>
        </div>
        <!--销售职能-->
        <div class="form-group">
            <label class="col-lg-2 control-label">销售职能：</label>
            <div class="col-lg-10">
                <label>
                    <input type="checkbox" ng-model="form.sale_enabled" value="true"/>
                    开通销售职能（可通过手机预订占座，统计本人订单业绩，并协助分析客户价值）
                </label>
            </div>
        </div>
        <!--++订单短信-->
        <div ng-if="form.guest_channel===1" ng-show="form.sale_enabled===true" class="form-group">
            <label class="col-lg-2 control-label">订单短信：</label>
            <div class="col-lg-10">
                <label class="control-label">
                    <input type="checkbox" ng-model="form.order_sms_inform"/>接收客户预定通知
                </label>
            </div>
        </div>
        <!--++短信附加-->
        <div ng-show="form.sale_enabled===true" class="form-group">
            <label class="col-lg-2 control-label">短信附加：</label>
            <div class="col-lg-10">
                <label class="control-label">
                    <input type="checkbox" ng-model="form.order_sms_attach"/>
                    为客户预订餐位时，发送给客户的短信中自动嵌入本人职位、姓名及联系电话
                </label>
            </div>
        </div>
        <!--++提成结算-->
        <div ng-show="form.sale_enabled===true" class="form-group">
            <label class="col-lg-2 control-label">提成结算：</label>
            <div class="col-lg-10">
                <ul class="list-group">
                    <!--接单提成-->
                    <li class="list-group-item">
                        <!--接单提成-->
                        <label>
                            <input type="checkbox" ng-model="form.order_bonus.enabled"/>接单提成
                        </label>
                        <div class="p-2 bg-warning" ng-show="form.order_bonus.enabled">
                            <h5>提成结算方式</h5>
                            <div>
                                <label>
                                    <input type="radio" ng-model="form.order_bonus.method" value="0"/>按消费额百分比
                                </label>
                                <label class=" inline">
                                    消费金额 * <input type="number" ng-model="form.order_bonus.value">元/桌
                                </label>
                            </div>
                            <div>
                                <label>
                                    <input type="radio" ng-model="form.order_bonus.method" value="1"/>按订单数量
                                </label>
                                <label>
                                    <input type="number" ng-model="form.order_bonus.value">元/桌
                                </label>
                            </div>
                            <div>
                                <label>
                                    <input type="radio" ng-model="form.order_bonus.method" value="2"/>按消费人数
                                </label>
                                <label>
                                    <input type="number" ng-model="form.order_bonus.value">元/人
                                </label>
                            </div>
                        </div>
                    </li>
                    <!--开新客提成-->
                    <li class="list-group-item">
                        <!--开新客提成-->
                        <label>
                            <input type="checkbox" ng-model="form.new_customer_bonus.enabled"/>开新客提成
                            <a class="warning">客户第一次在系统内生成订单消费成功，则接单人新开客数量加1。</a>
                        </label>
                        <div class="p-2 bg-warning" ng-show="form.new_customer_bonus.enabled">
                            <h5>提成结算方式</h5>
                            <div>
                                <label class=" inline">
                                    消费金额 * <input type="number" ng-model="form.new_customer_bonus.value">元/桌
                                </label>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!--管辖桌位-->
        <div class="form-group">
            <label class="col-lg-2 control-label">管辖桌位：</label>
            <div class="col-lg-10">
                <!--管理全部桌位-->
                <label>
                    <input type="checkbox" ng-model="form.desk_manage.all_seat"/>管理全部桌位
                </label>
                <!--区域导航栏-->
                <div>
                    区域导航栏
                    <nav class="navbar">
                        <ul class="nav nav-tabs">
                            <li ng-repeat="x in area.list|filter:{is_enabled:true}">{{x.name}}</li>
                        </ul>
                    </nav>
                </div>
                <!--桌位选择列表-->
                <div ng-if="form.desk_manage.all_seat===false">
                    <ul class="list-group">
                        <li class="list-group-item" ng-repeat="x in area.list">{{x.name}}</li>
                    </ul>
                </div>
            </div>
        </div>
        <!--管辖区域【高管】【预订员】【客户经理】-->
        <div ng-if="form.guest_channel===3" class="form-group">
            <label class="col-lg-2 control-label">管辖区域：</label>
            <div class="col-lg-10">
                <ul class="list-inline">
                    <li ng-repeat="x in area.list|filter:{is_enabled:true}">
                        <label>
                            <input type="checkbox" ng-model="form.select_area[x].select" value="x.value"/>{{x.name}}
                        </label>
                    </li>
                </ul>
            </div>
        </div>
        <!--沟通渠道【预订员】-->
        <div ng-if="form.guest_channel===3" class="form-group">
            <label class="col-lg-2 control-label">沟通渠道：</label>
            <div class="col-lg-10">
                <ul class="list-group">
                    <li class="list-group-item">
                        <label>
                            <input type="radio" ng-model="form.communicate.channel" value="tel_box"/>电话盒子
                        </label>
                        <ul class="list-inline" ng-if="form.communicate.channel==='tel_box'">
                            <li ng-repeat="x in form.communicate.tel_box">
                                <label>
                                    <input type="checkbox" ng-model="x" ng-click="check_box($index)"/>{{x}}
                                </label>
                            </li>
                        </ul>
                    </li>
                    <li class="list-group-item">
                        <label>
                            <input type="radio" ng-model="form.communicate.channel" value="smart_tel"/>智能电话
                        </label>
                        <ul class="list-inline" ng-show="form.communicate.channel==='smart_tel'">
                            <li ng-repeat="x in form.communicate.smart_tel">
                                <label>
                                    <input type="checkbox" ng-model="x" ng-click="check_phone($index)"/>{{x}}
                                </label>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </form>
</div>
<div class="modal-footer">
    <input class="btn btn-success btn-sm" type="button" ng-click="save()" value="保存"/>
    <input class="btn btn-warning btn-sm" type="button" ng-click="cancel()" value="取消"/>
</div>